{% extends "store/base.html" %}
{% load static %}

{% block title %}Cập nhật hồ sơ - Đại lý Sơn Phát Tấn{% endblock %}

{% block content %}
<section class="page-section">
  <div class="profile-wrapper">
    <aside class="card profile-nav">
      <div class="card-body">
        <h5 class="card-title">Tài khoản</h5>
        <ul class="profile-nav__list">
          <li><a href="{% url 'store:profile' %}">Hồ sơ</a></li>
          <li><a href="{% url 'store:wishlist' %}">Wishlist</a></li>
          <li><a href="{% url 'store:order_history' %}">Đơn hàng</a></li>
          <li><a href="{% url 'store:logout' %}">Đăng xuất</a></li>
        </ul>
      </div>
    </aside>

    <div class="card profile-card">
      <div class="card-body stack">
        <div>
          <h3 class="section-title">Cập nhật hồ sơ</h3>
          <p class="page-subtitle">Thông tin của bạn sẽ được dùng cho đơn hàng và hỗ trợ.</p>
        </div>

        {% if messages %}
          {% for message in messages %}
            <div class="message {{ message.tags }}">{{ message }}</div>
          {% endfor %}
        {% endif %}

        <form method="post" class="stack">
          {% csrf_token %}
          <div class="profile-grid">
            <div class="stack">
              <label for="first_name" class="form-label">Họ</label>
              <input type="text" id="first_name" name="first_name" value="{{ user.first_name }}" class="form-control">
            </div>
            <div class="stack">
              <label for="last_name" class="form-label">Tên</label>
              <input type="text" id="last_name" name="last_name" value="{{ user.last_name }}" class="form-control">
            </div>
            <div class="stack">
              <label for="email" class="form-label">Email</label>
              <input type="email" id="email" name="email" value="{{ user.email }}" required class="form-control">
            </div>
            <div class="stack">
              <label for="phone" class="form-label">Điện thoại</label>
              <input type="text" id="phone" name="phone" value="{{ profile.phone }}" class="form-control">
            </div>
          </div>

          <div class="stack">
            <label for="address" class="form-label">Địa chỉ</label>
            <textarea id="address" name="address" rows="3" class="form-control">{{ profile.address }}</textarea>
          </div>

          <div class="hero-actions">
            <button type="submit" class="btn btn-primary">Lưu thay đổi</button>
            <a href="{% url 'store:profile' %}" class="btn btn-outline">Hủy</a>
          </div>
        </form>
      </div>
    </div>
  </div>
</section>
{% endblock %}
