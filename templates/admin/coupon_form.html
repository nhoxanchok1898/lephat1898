<!DOCTYPE html>
<html>
<head>
    <title>{{ action }} Coupon - Admin</title>
</head>
<body>
    <h1>{{ action }} Coupon</h1>
    
    <form method="post">
        {% csrf_token %}
        
        {% if coupon %}
        <input type="text" name="code" value="{{ coupon.code }}" readonly>
        {% else %}
        <input type="text" name="code" placeholder="Coupon Code" required>
        {% endif %}
        
        <textarea name="description" placeholder="Description">{% if coupon %}{{ coupon.description }}{% endif %}</textarea>
        
        <select name="discount_type" required>
            <option value="percentage" {% if coupon and coupon.discount_type == 'percentage' %}selected{% endif %}>Percentage</option>
            <option value="fixed" {% if coupon and coupon.discount_type == 'fixed' %}selected{% endif %}>Fixed Amount</option>
        </select>
        
        <input type="number" step="0.01" name="discount_value" value="{% if coupon %}{{ coupon.discount_value }}{% endif %}" required>
        <input type="number" step="0.01" name="min_purchase_amount" value="{% if coupon %}{{ coupon.min_purchase_amount }}{% else %}0{% endif %}">
        <input type="number" name="max_uses" value="{% if coupon %}{{ coupon.max_uses }}{% endif %}">
        <input type="number" name="max_uses_per_user" value="{% if coupon %}{{ coupon.max_uses_per_user }}{% else %}1{% endif %}">
        <input type="datetime-local" name="start_date" value="{% if coupon %}{{ coupon.start_date|date:'Y-m-d\TH:i' }}{% endif %}" required>
        <input type="datetime-local" name="end_date" value="{% if coupon %}{{ coupon.end_date|date:'Y-m-d\TH:i' }}{% endif %}" required>
        
        {% if coupon %}
        <label>
            <input type="checkbox" name="is_active" {% if coupon.is_active %}checked{% endif %}>
            Active
        </label>
        {% endif %}
        
        <button type="submit">Save</button>
    </form>
</body>
</html>
